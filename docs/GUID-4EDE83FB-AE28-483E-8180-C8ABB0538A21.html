<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="concept" />
<meta name="DC.title" content="G3-PLC Device List View" />
<meta name="DC.relation" scheme="URI" content="GUID-AEF828B2-7BEE-47DA-84FC-8959348255B2.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21" />
<meta name="DC.language" content="en-US" />
<link rel="stylesheet" type="text/css" href="stylesheets/commonltr.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<link rel="stylesheet" type="text/css" href="./stylesheets/common-extended.css" /><title>G3-PLC Device List View</title>
<meta name="Microsoft.Help.Id" content="GUID-B0EED1DD-60EE-41BF-A319-00EF8C6E51CB-GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21" />
<meta name="Microsoft.Help.TocParent" content="GUID-B0EED1DD-60EE-41BF-A319-00EF8C6E51CB-GUID-AEF828B2-7BEE-47DA-84FC-8959348255B2" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB® Harmony Smart Energy PRIME Applications Reference A 04/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
        function cpy(id, button) {
        
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                    button.textContent = "Copy";
                    button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
              console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
        }
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style></head>
<body id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21">

   <h1 class="title topictitle1" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__GUID-03AF82DF-E0E5-4F5D-B235-1FCA9F0D7E27">G3-PLC Device List View</h1>
   <div class="body conbody">
      <p class="p" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__ID-0000028E">This view lists all the nodes that are detected by the sniffer. The
         sniffer uses the LoWPAN Bootstrap protocol frames to learn which devices are present in the
         network. In order to decode those frames, it is required to supply the PSK key of the
         network.</p>

      <p class="p" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__ID-0000028F">Devices in the List View are arranged per PANID. If the sniffer detects
         traffic from more than a G3-PLC Network, it will arrange the nodes in different tree
         structures. A node is associated to a PANID using the addressing information of the
         “accepted” bootstrap frame. Also, the sniffer analyzes the routing Mesh Header present in
         the frames to create a tree structure based on the number of hops needed to reach a device.
         This produces a hierarchical view of the network as shown in <a class="xref" href="#GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__FIG_QZW_NVM_SCB">Figure 1</a>.</p>

      <div class="p" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__ID-00000292">Device nodes on the list can be in 3 states:<ul class="ul" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__UL_NMH_QVM_SCB">
            <li class="li" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__GUID-7214BE4D-3463-4B27-ADA5-ED2D175F7951"><strong class="ph b">Joining:</strong> The device has started the bootstrap protocol. The sniffer has
               correctly decoded a LBP_JOIN frame</li>

            <li class="li" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__GUID-00284A44-0022-47A8-A719-162E29CA059C"><strong class="ph b">Challenge:</strong> The coordinator has sent an LBP_CHALLENGE, EAP message 3 to the
               device assigning a short address</li>

            <li class="li" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__GUID-DF7E1CFC-5C79-4FD4-832A-8CD6B152CB09"><strong class="ph b">Accepted:</strong> The device node has
               received a LoWPAN Bootstrap ACCEPTED frame (It has successfully completed the
               bootstrap process). Based on the addressing information of the frame, the LoWPAN
               Bootstrap Agent (LBA) value is updated</li>

         </ul>
</div>

      <div class="fig fignone" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__FIG_QZW_NVM_SCB"><div class="figcap"><span class="fig--title-label">Figure 1. </span>G3-PLC Device List Window</div>
         
         <img class="image" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__IMAGE_WLR_1KW_TCB" src="GUID-F82694B2-8E07-4FB2-BCC3-DC7183C53D70-low.png" />
      </div>

      <p class="p" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__ID-0000029D">Route cost is updated based in the LoadNG Route Request message. Usually,
         after the bootstrap process, a device will query the network to obtain a route to the
         G3-PLC Coordinator. The device will use the LoadNG protocol to obtain the route. Typically,
         just after a node has completed the bootstrap process, the network coordinator will receive
         a LoadNG Route Request frame. Route cost obtained from the payload of this node will be
         shown. As routes can change over time, it useful to know when a device has requested a
         route. To obtain this information from the sniffer database, it is needed to execute an SQL
         query filter as:</p>

      <pre class="pre codeblock"><button title="Copy Code" class="copy-code" onclick="cpy('d493e58', this);">Copy</button><code id="d493e58" content="SELECT Frame.* FROM Frame,RREQ WHERE (CmdType &amp; 16383) = 4096 AND idframe=RREQ_idFrame AND Originator = 5 ORDER BY idFrame DESC">SELECT Frame.* FROM Frame,RREQ WHERE (CmdType &amp; 16383) = 4096 AND idframe=RREQ_idFrame AND Originator = 5 ORDER BY idFrame DESC</code></pre>
      <p class="p" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__ID-000002A0">That query will produce all route request frames for a device (originator)
         with short address “5”, ordered by idFrame (i.e. showing newest request first).</p>

      <p class="p" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__ID-000002A1">Path column is updated each time the sniffer decodes a LoadNG Path
         Response message received by a PAN coordinator (destination address equals to 0). This
         message contains the complete route between a device and the network coordinator. This
         route may change over time, and similarly to the Route Cost, it is possible to query the
         sniffer database to find out the Path updates for a device node:</p>

      <pre class="pre codeblock"><button title="Copy Code" class="copy-code" onclick="cpy('d493e67', this);">Copy</button><code id="d493e67" content="SELECT Frame.* FROM Frame,PREP WHERE (CmdType &amp; 16383) = 4349 AND PREP_idframe = idframe AND Originator = 3 ORDER BY idFrame DESC">SELECT Frame.* FROM Frame,PREP WHERE (CmdType &amp; 16383) = 4349 AND PREP_idframe = idframe AND Originator = 3 ORDER BY idFrame DESC</code></pre>
      <div class="p" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__ID-000002A3">Path request frames may not be present on the network. It depends on the
         coordinator behavior. Device List shows path as a list of hops. Forward hops to reach the
         node are shown between square brackets (i.e. <em class="ph i">“[0001, 0, 0]”</em>) and reverse hops with
         braces (i.e <em class="ph i">“{0002, 0, 1}”</em>). Each entry on the list contains three pieces of
            information:<ol class="ol" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__OL_FCL_1WM_SCB">
            <li class="li" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__GUID-3911AE3E-29B7-4311-9087-8948FAB94DEC"><span class="indent-level-default">1.</span>Next hop address</li>

            <li class="li" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__GUID-E7FDE8FA-19DD-4AF5-A3B5-87A09B7D847F"><span class="indent-level-default">2.</span>Metric Not Supported field</li>

            <li class="li" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__GUID-1D2C4A87-E854-4C13-B0BA-C2EF4D29C252"><span class="indent-level-default">3.</span>Link cost</li>

         </ol>
</div>

      <p class="p" id="GUID-4EDE83FB-AE28-483E-8180-C8ABB0538A21__ID-000002AC">Forward path begins with the arrow symbol “=&gt;” and reverse path with
         “&lt;=”.</p>

   </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-AEF828B2-7BEE-47DA-84FC-8959348255B2.html">G3-PLC</a></div>
</div>
</div></body>
</html>