<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="concept" />
<meta name="DC.title" content="Initial Steps" />
<meta name="DC.relation" scheme="URI" content="GUID-8D66ECA9-8C74-42B9-8915-33D381579FBB.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F" />
<meta name="DC.language" content="en-US" />
<link rel="stylesheet" type="text/css" href="stylesheets/commonltr.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<link rel="stylesheet" type="text/css" href="./stylesheets/common-extended.css" /><title>Initial Steps</title>
<meta name="Microsoft.Help.Id" content="GUID-B0EED1DD-60EE-41BF-A319-00EF8C6E51CB-GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F" />
<meta name="Microsoft.Help.TocParent" content="GUID-B0EED1DD-60EE-41BF-A319-00EF8C6E51CB-GUID-8D66ECA9-8C74-42B9-8915-33D381579FBB" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLABÂ® Harmony Smart Energy PRIME Applications Reference A 04/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
        function cpy(id, button) {
        
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                    button.textContent = "Copy";
                    button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
              console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
        }
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style></head>
<body id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F">

   <h1 class="title topictitle1" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__GUID-59653908-2B50-4E46-9CF0-BB35ED7452AD">Initial Steps</h1>
   <div class="body conbody">
      <p class="p"><strong class="ph b">Software Installation</strong></p>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-000000B1">To install the software, execute the installation wizard provided. First
         window allows selecting between multiuser support and current user.</p>

      <div class="fig fignone" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__FIG_Y4J_RKM_SCB"><div class="figcap"><span class="fig--title-label">Figure 1. </span>First Wizard Window</div>
         
         <img class="image" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-000000B6" src="GUID-7DFC0A17-1094-48BE-AB5C-D6F73DF71546-low.png" width="350" height="271" />
      </div>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-000000B9">Read, and accept terms and conditions expressed in the End User License
         Agreement:</p>

      <div class="fig fignone" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__FIG_ZQH_SKM_SCB"><div class="figcap"><span class="fig--title-label">Figure 2. </span>License Agreement</div>
         
         <img class="image" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__IMAGE_ZLJ_RGF_LDB" src="GUID-7D72CD00-0676-432E-B0A9-B01D996D9008-low.png" width="350" />
      </div>

      <p class="p">Next, select the components to install:</p>

      <div class="fig fignone" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__FIG_CQT_VKM_SCB"><div class="figcap"><span class="fig--title-label">Figure 3. </span>Select Components</div>
         
         <img class="image" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-000000C8" src="GUID-B9803C03-E241-4DE0-81B5-B6B2FEB5A25E-low.png" width="350" height="271" />
      </div>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-000000CB">And finally, select the folder where the software must be installed or
         just simply use the default location:</p>

      <div class="fig fignone" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__FIG_IKF_YKM_SCB"><div class="figcap"><span class="fig--title-label">Figure 4. </span>Select Folder</div>
         
         <img class="image" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-000000D0" src="GUID-AB06344C-CE17-453E-997A-88391E25E05F-low.png" width="350" height="271" />
      </div>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-000000D8">The wizard will finish without any further configuration:</p>

      <div class="fig fignone" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-FIG-00000002"><div class="figcap"><span class="fig--title-label">Figure 5. </span>Installation Completed</div>
         
         <img class="image" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-000000DD" src="GUID-D0B6C698-699F-424D-8ABB-237063BE9714-low.png" width="350" height="271" />
      </div>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-000000E0">The installation procedure generates desktop and start menu shortcuts. Use
         any of them to start the software.</p>

      <p class="p"><strong class="ph b">Hardware Sniffer Device</strong></p>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-000000E4">Along with the PLC Kit, you received the instructions to build the
         appropriate firmware using Atmel Studio or IAR tools. Build and program your embedded kit
         with the correct settings for your needs. It is important to note that the firmware
         configuration must match your hardware device.</p>

      <p class="p"><strong class="ph b">Starting the Sniffer</strong></p>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-000000E8">The first step is to plug the hardware device to the power line. Then,
         connect the USB cable to the host computer. Now, we are ready to start the PLC Sniffer
         software using, for example, the link created on your desktop during the install
         process.</p>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-000000EA">Now, you must see the main window:</p>

      <div class="fig fignone" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__FIG_LWZ_PLM_SCB"><div class="figcap"><span class="fig--title-label">Figure 6. </span>PLC Sniffer Main Window</div>
         
         <img class="image" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__IMAGE_IVC_NRM_CDB" src="GUID-86243339-5E0C-4D82-9012-38DCB2E926AF-low.png" height="216" width="462" />
      </div>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-000000F2">In order to start capturing packets on the network, it is necessary to
         setup input and database parameters. Input parameters allow choosing between serial and
         TCP/IP link, as well as choosing between PRIME and G3-PLC standards. Set the appropriate
         settings for hardware sniffer.</p>

      <div class="fig fignone" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__FIG_KZD_XLM_SCB"><div class="figcap"><span class="fig--title-label">Figure 7. </span>Input Settings Dialog</div>
         
         <img class="image" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__IMAGE_GLM_VHM_CDB" src="GUID-36C7BE71-710F-4AC6-A7EE-8E5B2833F25D-low.png" width="300" />
      </div>

      <p class="p"></p>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-000000FB">If the COM port to choose is not known, it can be located in the Windows
         Device Manager in the Port (COM &amp; LPT) section. In this example, the COM18 is used:</p>

      <div class="fig fignone" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__FIG_PVV_ZLM_SCB"><div class="figcap"><span class="fig--title-label">Figure 8. </span>Windows Device Manager</div>
         
         <img class="image" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__IMAGE_TG3_Y2W_TCB" src="GUID-D46948F7-50D6-4448-9EE7-A8E9698455BD-low.png" height="311" width="426" />
      </div>

      <p class="p"></p>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-00000103">Once the input settings have been configured, it is necessary to setup the
         database file to store the traffic. This software uses SQLite to save all the packets
         snooped. Using SQLite allows performing complex searches and filters on the relational
         database.</p>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-00000105">It is also possible to select a TCP/IP input. This is useful to access
         remote hardware. For example, it could be possible to setup a relay station using connected
         embedded Linux board and <em class="ph i">socat</em> software.</p>

      <div class="fig fignone" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-FIG-00000003"><div class="figcap"><span class="fig--title-label">Figure 9. </span>Database Settings</div>
         
         <img class="image" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__IMAGE_SLJ_Y3M_CDB" src="GUID-810AC0C1-7DFC-4550-9995-7E80825357ED-low.png" width="450" />
      </div>

      <p class="p"></p>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-0000010E">Database files can hold large logs without having to split them in pieces.
         Also files can be opened with any SQLite data analyzer tool, for example, the Mozilla
         Firefox plug-in SQLite Manager. It is possible to build your own scripts (for example, in
         Python) to analyze the data. Section <a class="xref" href="GUID-E8D21C65-D545-4625-B32C-B6355F23BF83.html#GUID-E8D21C65-D545-4625-B32C-B6355F23BF83">Building Your Own Scripts</a> shows how to do this.</p>

      <div class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-00000112">There are three options when creating a log database:<ul class="ul" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__UL_Q1V_2MM_SCB">
            <li class="li" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__GUID-53FE7C69-8896-4725-A9BD-D8F51C1D39F4"><strong class="ph b">Append:</strong> Use this option if you
               wish to keep data already stored in the database file. If the selected file does not
               exist, a new database is created</li>

            <li class="li" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__GUID-A5E6EAE5-D8C3-46C7-9EDB-F479CED599CF"><strong class="ph b">Overwrite:</strong> Each time the
               capture is started, the database is initialized. Previously recorded data in the
               database will be lost</li>

            <li class="li" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__GUID-6E7CD438-07AC-4FC2-8C69-8CA86A30ABC9"><strong class="ph b">Date-time suffix:</strong> In this
               case, the file name supplied is modified adding a suffix with the date and time of
               the beginning of the log capture. Each time a new capture is started, a new file will
               be created with the corresponding date/time suffix</li>

         </ul>
</div>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-0000011A">Database settings also allow selection of an initialization script. Leave
         it empty if you do not wish to modify the default behavior.</p>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-0000011C">The initialization script will be executed right after a new database is
         created. This allows setting up of the database to a predefined state. There are a set of
         scripts supplied along with the PLC Sniffer that prepare the database to be able to decode
         all the messages sent in the Interoperability tests defined by the G3-PLC Alliance. These
         scripts are located in <em class="ph i">{Program_Install}/Init-DB-Scripts</em> folder.</p>

      <p class="p" id="GUID-9575B70A-C7F8-4E9C-AE69-BB596643090F__ID-0000011F">At this point, the tool is ready to start capturing data. Click on the
         menu Capture â Start to begin logging data. The status bar at the bottom of the window will
         show the current setup and status of the tool.</p>

   </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-8D66ECA9-8C74-42B9-8915-33D381579FBB.html">PHY Sniffer</a></div>
</div>
</div></body>
</html>